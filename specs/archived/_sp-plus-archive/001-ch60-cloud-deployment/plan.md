# Chapter 60: Real Cloud Deployment — Implementation Plan

**Generated by**: chapter-planner v2.0.0 (Reasoning-Activated)
**Source Spec**: `/Users/mjs/Documents/code/panaversity-official/tutorsgpt/ag-factory/specs/001-ch60-cloud-deployment/spec.md`
**Created**: 2025-12-30
**Constitution**: v7.0.0 (Agent Factory Paradigm)

---

## I. Chapter Analysis

### Chapter Type

**Technical/Code-Focused** — This chapter teaches hands-on cloud deployment with CLI tools, YAML configurations, and production infrastructure patterns. The learning objectives use "apply/create/implement" verbs, and code examples are required throughout.

**Rationale**: Students execute real cloud CLI commands (doctl, hetzner-k3s), deploy production infrastructure, and validate working systems. This is not conceptual understanding—it's applied skill development.

### Concept Density Analysis

**Core Concepts** (from spec): 12 concepts

1. Managed vs self-managed Kubernetes
2. Cloud provider CLI tools (doctl, hetzner-k3s)
3. Cluster provisioning commands
4. kubeconfig management
5. Cloud LoadBalancer service behavior
6. DNS configuration for real domains
7. TLS certificate provisioning (Let's Encrypt)
8. Production secrets management
9. Cost estimation and optimization
10. Multi-cloud portability pattern
11. Production readiness verification
12. Cluster teardown and cleanup

**Complexity Assessment**: Standard complexity (B1 proficiency, applied skills)

**Proficiency Tier**: B1 (Intermediate) from chapter-index.md — Part 7, Tier 2 Enterprise

**Justified Lesson Count**: 11 lessons (L00-L10)

**Layer Distribution**:
- L00 (Skill-First): 1 lesson
- L01-L04, L07 (Manual Foundation): 5 lessons
- L05-L06, L08-L09 (AI Collaboration): 4 lessons
- L10 (Spec-Driven Capstone): 1 lesson

**Reasoning**:
- 12 core concepts across 11 lessons = ~1.1 concepts/lesson (well under B1 limit of 7-10)
- Heavy L1 presence justified: cloud provisioning requires manual CLI understanding before AI collaboration
- The chapter follows Skill-First pattern (L00 comes first)
- Capstone (L10) is spec-driven orchestration producing deployable Digital FTE component

---

## II. Success Evals (from Spec)

**Predefined Success Criteria** (evals-first requirement):

| ID | Success Criterion | Business Goal |
|----|------------------|---------------|
| SC-001 | Students can provision a DigitalOcean DOKS cluster using doctl in under 10 minutes | Reduce deployment friction |
| SC-002 | Students can deploy Task API to cloud with full stack (Dapr + Ingress + TLS) in under 30 minutes | Production deployment velocity |
| SC-003 | Students can access their deployed API via HTTPS on a real domain | Real-world validation |
| SC-004 | Students understand that 90%+ of Kubernetes commands work unchanged across providers | Cloud-agnostic confidence |
| SC-005 | Students can provision a Hetzner K3s cluster for ~$5/month as a learning lab | Budget-conscious skill development |
| SC-006 | Students can tear down all cloud resources and verify zero ongoing cost | Cost discipline |
| SC-007 | Students' multi-cloud-deployer skill can generate accurate CLI commands for at least 3 providers | Reusable intelligence asset |
| SC-008 | 100% of code examples include expected output blocks | Learning clarity |

**All lessons below map to these evals.**

---

## III. Lesson Sequence

### L00: Build Your Cloud Deployment Skill (Layer 3: Skill-First)

**Learning Objective**: Create a `multi-cloud-deployer` skill using natural conversation with Claude, grounded in official documentation

**Stage**: L3 (Intelligence Design — Skill-First Pattern)

**CEFR Proficiency**: B1

**New Concepts** (count: 1):
1. Skill-First Learning (use Claude to build a skill from official docs)

**Cognitive Load Validation**: 1 concept < 10 limit = WITHIN LIMIT

**Maps to Evals**: SC-007

**Content Elements**:
- Clone skills-lab (fresh state, no assumptions)
- Write LEARNING-SPEC.md (optional, can be implicit in prompt)
- Use `/fetching-library-docs` for DigitalOcean and Hetzner docs
- Use `/skill-creator` to build multi-cloud-deployer skill
- Verify skill at `.claude/skills/multi-cloud-deployer/`

**Prerequisites**: Chapter 50 (Kubernetes fundamentals), skills-lab access

**Estimated Time**: 15 minutes

**Skill Output Location**: `.claude/skills/multi-cloud-deployer/SKILL.md`

**Quality Reference**: Match structure of L00 in Chapter 49 (Docker) and Chapter 50 (Kubernetes)

---

### L01: Beyond Docker Desktop (Layer 1: Manual Foundation)

**Learning Objective**: Explain why production deployments require real cloud infrastructure, and distinguish managed vs self-managed Kubernetes tradeoffs

**Stage**: 1 (Manual Foundation — conceptual grounding)

**CEFR Proficiency**: B1

**New Concepts** (count: 5):
1. Docker Desktop limitations for production
2. Managed Kubernetes benefits (DOKS, AKS, GKE, EKS)
3. Self-managed Kubernetes (Hetzner + K3s)
4. Cost-control-operations triangle
5. Provider selection criteria

**Cognitive Load Validation**: 5 concepts < 10 limit = WITHIN LIMIT

**Maps to Evals**: SC-004, SC-007

**Content Elements**:
- Why Docker Desktop isn't production (single node, no HA, local networking)
- Managed K8s: Provider handles control plane, you handle workloads
- Self-managed: You handle everything, maximum control and savings
- Decision matrix: Use case -> Provider recommendation
- Cost comparison table (current Dec 2025 pricing from expertise skill)

**Teaching Modality**: Direct Teaching with comparison tables (differentiate from Ch59's error-analysis modality)

**Prerequisites**: Ch49 (Docker), Ch50 (Kubernetes fundamentals)

**Estimated Time**: 25 minutes

**Reflect on Your Skill Section**:
```markdown
### Reflect on Your Skill

Test your `multi-cloud-deployer` skill:
- Does it explain managed vs self-managed tradeoffs?
- Does it include the cost comparison matrix?
- Can it recommend a provider based on use case?

If gaps exist, update your skill with provider selection guidance.
```

---

### L02: DigitalOcean Account & doctl Setup (Layer 1: Manual Foundation)

**Learning Objective**: Create a DigitalOcean account, install doctl CLI, and authenticate using API token

**Stage**: 1 (Manual Foundation — hands-on setup)

**CEFR Proficiency**: B1

**New Concepts** (count: 4):
1. DigitalOcean account creation
2. API token generation
3. doctl CLI installation
4. doctl authentication flow

**Cognitive Load Validation**: 4 concepts < 10 limit = WITHIN LIMIT

**Maps to Evals**: SC-001, SC-007

**Content Elements**:
- Account creation workflow (credit card, $200 free credit)
- API token generation (read/write scope)
- doctl installation (brew install doctl / snap install doctl)
- `doctl auth init` with token
- Verify with `doctl account get`

**Teaching Modality**: Hands-On Discovery (step-by-step with verification)

**Prerequisites**: L01 (understand why cloud)

**Estimated Time**: 20 minutes

**Reflect on Your Skill Section**:
```markdown
### Reflect on Your Skill

Test your `multi-cloud-deployer` skill:
- Does it include doctl installation and auth commands?
- Does it explain API token scope requirements?

If gaps exist, update your skill with DigitalOcean CLI setup patterns.
```

---

### L03: Provisioning DOKS Cluster (Layer 1: Manual Foundation)

**Learning Objective**: Create a DigitalOcean Kubernetes cluster using doctl, understand cluster options, and connect kubectl

**Stage**: 1 (Manual Foundation — core provisioning skill)

**CEFR Proficiency**: B1

**New Concepts** (count: 6):
1. doctl kubernetes cluster create command
2. Node size selection (s-2vcpu-4gb)
3. Node count and scaling
4. Region selection
5. Kubernetes version selection
6. kubeconfig save and context switching

**Cognitive Load Validation**: 6 concepts < 10 limit = WITHIN LIMIT

**Maps to Evals**: SC-001, SC-003, SC-007

**Content Elements**:
- Full `doctl kubernetes cluster create` command with options
- Expected output and timing (~5 minutes)
- `doctl kubernetes cluster kubeconfig save`
- `kubectl get nodes` verification
- Key options explained: --size, --count, --version, --region

**Teaching Modality**: Hands-On Discovery (execute commands, observe outputs)

**Prerequisites**: L02 (doctl authenticated)

**Estimated Time**: 30 minutes

**Expected Output Block** (SC-008 compliance):
```bash
# Expected output after cluster creation
doctl kubernetes cluster create task-api-cluster \
  --region nyc1 \
  --version 1.31.4-do.0 \
  --size s-2vcpu-4gb \
  --count 3 \
  --wait

# Output:
Notice: Cluster is provisioning, waiting for cluster to be running
..........
Notice: Cluster created, fetching credentials
Notice: Adding cluster credentials to kubeconfig file
Notice: Setting current-context to do-nyc1-task-api-cluster

ID                                      Name                 Region    Version        Auto Upgrade    Status     Node Pools
12345678-abcd-1234-abcd-123456789012    task-api-cluster    nyc1      1.31.4-do.0    false           running    default-pool
```

**Reflect on Your Skill Section**:
```markdown
### Reflect on Your Skill

Test your `multi-cloud-deployer` skill:
- Can it generate correct doctl cluster create commands?
- Does it include kubeconfig save and context switching?

If gaps exist, update your skill with DOKS provisioning patterns.
```

---

### L04: Cloud Load Balancer & DNS (Layer 1: Manual Foundation)

**Learning Objective**: Understand how cloud LoadBalancer services differ from local NodePort, configure DNS for real domains

**Stage**: 1 (Manual Foundation — networking concepts)

**CEFR Proficiency**: B1

**New Concepts** (count: 5):
1. Cloud LoadBalancer service behavior
2. External IP provisioning
3. LoadBalancer cost implications (~$12/mo on DO)
4. DNS A-record configuration
5. DNS propagation and TTL

**Cognitive Load Validation**: 5 concepts < 10 limit = WITHIN LIMIT

**Maps to Evals**: SC-003, SC-006

**Content Elements**:
- Create LoadBalancer Service, watch EXTERNAL-IP populate
- `kubectl get svc -w` to observe IP assignment
- Manual DNS A-record creation (or nip.io/sslip.io for testing)
- DNS propagation verification (`dig`, `nslookup`)
- Cost awareness: Each LoadBalancer = additional monthly cost

**Teaching Modality**: Direct Teaching with hands-on verification

**Prerequisites**: L03 (cluster running), Ch50 L05 (Services fundamentals)

**Estimated Time**: 25 minutes

**Reflect on Your Skill Section**:
```markdown
### Reflect on Your Skill

Test your `multi-cloud-deployer` skill:
- Does it explain LoadBalancer service differences from NodePort?
- Does it include DNS configuration steps?

If gaps exist, update your skill with LoadBalancer and DNS patterns.
```

---

### L05: Deploying Task API to DOKS (Layer 2: AI Collaboration)

**Learning Objective**: Deploy the complete Task API stack (application + Dapr + Ingress + TLS) to DigitalOcean DOKS using AI collaboration for configuration decisions

**Stage**: 2 (AI Collaboration — Three Roles applied invisibly)

**CEFR Proficiency**: B1

**New Concepts** (count: 6):
1. Full stack deployment sequence
2. Dapr init on cloud cluster
3. Ingress controller installation (Traefik)
4. cert-manager + Let's Encrypt ClusterIssuer
5. Helm values customization for cloud
6. End-to-end verification

**Cognitive Load Validation**: 6 concepts < 10 limit = WITHIN LIMIT

**Maps to Evals**: SC-002, SC-003, SC-008

**Three Roles Demonstrations** (INVISIBLE in student text):

**Role 1: AI as Teacher**
- **Scenario**: Student has basic deployment understanding
- **AI suggests**: Deployment sequence matters—Dapr before application, Ingress before cert-manager triggers
- **What student learns**: Order dependencies in cloud stack deployment

**Role 2: AI as Student**
- **Scenario**: AI suggests default Helm values
- **Student responds**: "I need TLS enabled and my specific domain configured"
- **AI adapts**: Customizes values.yaml with student's domain and TLS annotations

**Role 3: AI as Co-Worker**
- **Scenario**: First deployment attempt, certificate not ready
- **Iteration**: Student asks "why no certificate?", AI explains cert-manager timing, together they wait and verify
- **Convergence**: Working HTTPS endpoint

**Content Elements**:
- Complete deployment script (from expertise skill reference)
- Step-by-step with expected outputs
- Wait commands for each component
- Final verification: `curl https://tasks.yourdomain.com/health`

**Teaching Modality**: Specification-First + AI Collaboration

**Prerequisites**: L04 (LoadBalancer and DNS), Ch51 (Helm), Ch53 (Dapr), Ch56 (Ingress/TLS)

**Estimated Time**: 35 minutes

**Try With AI Section**:
```markdown
## Try With AI

**Challenge**: Deploy your Task API to DOKS with the full production stack.

**Part 1: Deployment Planning**
Ask AI: "I have a DOKS cluster running. Help me plan the deployment order for Task API with Dapr, Traefik Ingress, and cert-manager TLS."

Record the deployment sequence AI suggests.

**Part 2: Configuration Review**
AI will suggest default configurations. Ask yourself:
- Does the Helm values file include my domain?
- Is TLS enabled with Let's Encrypt production issuer?
- Are resource requests/limits appropriate?

Tell AI your specific requirements: "My domain is tasks.example.com, I want production Let's Encrypt certificates, and 512Mi memory limit."

**Part 3: Deployment Execution**
Execute the deployment commands AI provides. Watch for:
- Dapr pods in dapr-system namespace
- Traefik LoadBalancer getting EXTERNAL-IP
- cert-manager Certificate becoming Ready

**Part 4: Troubleshooting**
If certificate isn't issued, ask AI: "My Certificate shows False for Ready condition. How do I debug?"

**Part 5: Verification**
Test your production endpoint:
curl https://tasks.yourdomain.com/health

What improved through iteration with AI?
```

**Reflect on Your Skill Section**:
```markdown
### Reflect on Your Skill

Test your `multi-cloud-deployer` skill:
- Can it generate a complete deployment script for DOKS?
- Does it include Dapr, Ingress, and cert-manager setup?

If gaps exist, update your skill with full stack deployment patterns.
```

---

### L06: Production Secrets & Configuration (Layer 2: AI Collaboration)

**Learning Objective**: Manage secrets and configuration in cloud environments using Kubernetes Secrets, ConfigMaps, and cloud-native patterns

**Stage**: 2 (AI Collaboration)

**CEFR Proficiency**: B1

**New Concepts** (count: 5):
1. Kubernetes Secrets in cloud context
2. ConfigMaps for environment-specific config
3. Image pull secrets for private registries (GHCR)
4. Secret rotation considerations
5. Configuration hierarchy (default -> environment -> secret)

**Cognitive Load Validation**: 5 concepts < 10 limit = WITHIN LIMIT

**Maps to Evals**: SC-002, SC-008

**Three Roles Demonstrations** (INVISIBLE):

**Role 1: AI as Teacher**
- AI suggests: "Use external-secrets operator for production" (pattern student didn't know)
- Student learns about secrets management evolution

**Role 2: AI as Student**
- Student: "I just need basic secrets for this deployment, not enterprise patterns"
- AI adapts to simpler Kubernetes Secrets approach

**Role 3: AI as Co-Worker**
- Together iterate on secret structure: database URL, API keys, image pull credentials

**Content Elements**:
- Create and apply Secrets
- Create and apply ConfigMaps
- Image pull secret for GHCR
- Reference secrets in Deployment spec
- Verify secrets are mounted correctly

**Teaching Modality**: AI Collaboration (Socratic dialogue)

**Prerequisites**: L05 (deployment running), Ch50 L07 (ConfigMaps and Secrets fundamentals)

**Estimated Time**: 25 minutes

**Reflect on Your Skill Section**:
```markdown
### Reflect on Your Skill

Test your `multi-cloud-deployer` skill:
- Does it include secrets creation for cloud deployments?
- Does it cover image pull secrets for private registries?

If gaps exist, update your skill with cloud secrets patterns.
```

---

### L07: Personal Cloud Lab - Hetzner + K3s (Layer 1: Manual Foundation)

**Learning Objective**: Set up a budget-friendly (~$5/month) personal Kubernetes lab using Hetzner Cloud and hetzner-k3s CLI

**Stage**: 1 (Manual Foundation — alternative path)

**CEFR Proficiency**: B1

**New Concepts** (count: 6):
1. Hetzner Cloud account and API token
2. hetzner-k3s CLI tool
3. K3s (lightweight Kubernetes)
4. cluster.yaml configuration file
5. SSH key requirements
6. Hetzner Cloud Controller Manager

**Cognitive Load Validation**: 6 concepts < 10 limit = WITHIN LIMIT

**Maps to Evals**: SC-005, SC-006, SC-007

**Content Elements**:
- Hetzner account creation
- API token generation
- hetzner-k3s installation
- cluster.yaml configuration (from expertise skill)
- `hetzner-k3s create --config cluster.yaml`
- Verify with `kubectl get nodes`
- LoadBalancer behavior on Hetzner (CCM integration)

**Teaching Modality**: Hands-On Discovery (alternative to DOKS)

**Prerequisites**: L01 (understand why cloud), SSH key pair

**Estimated Time**: 30 minutes

**Expected Output Block** (SC-008 compliance):
```bash
hetzner-k3s create --config cluster.yaml

# Output:
Creating master server...
Master server created: fsn1-master-1 (10.0.0.2)
Installing K3s on master...
K3s installed successfully
Creating worker servers...
Worker server created: fsn1-worker-1 (10.0.0.3)
Worker server created: fsn1-worker-2 (10.0.0.4)
Installing K3s on workers...
All workers joined the cluster
Kubeconfig saved to ./kubeconfig

# Verify
export KUBECONFIG=./kubeconfig
kubectl get nodes
NAME              STATUS   ROLES                  AGE   VERSION
fsn1-master-1     Ready    control-plane,master   1m    v1.31.4+k3s1
fsn1-worker-1     Ready    <none>                 30s   v1.31.4+k3s1
fsn1-worker-2     Ready    <none>                 30s   v1.31.4+k3s1
```

**Reflect on Your Skill Section**:
```markdown
### Reflect on Your Skill

Test your `multi-cloud-deployer` skill:
- Can it generate hetzner-k3s configuration and commands?
- Does it explain K3s vs full Kubernetes differences?

If gaps exist, update your skill with Hetzner + K3s patterns.
```

---

### L08: Production Checklist & Verification (Layer 2: AI Collaboration)

**Learning Objective**: Validate cloud deployment against production readiness criteria including health checks, resource limits, and monitoring integration

**Stage**: 2 (AI Collaboration)

**CEFR Proficiency**: B1

**New Concepts** (count: 6):
1. Health endpoint verification
2. Resource requests and limits audit
3. Monitoring integration check
4. Replica and HPA verification
5. Network policy presence
6. Production readiness checklist pattern

**Cognitive Load Validation**: 6 concepts < 10 limit = WITHIN LIMIT

**Maps to Evals**: SC-002, SC-003, SC-008

**Three Roles Demonstrations** (INVISIBLE):

**Role 1: AI as Teacher**
- AI suggests: "Check that liveness/readiness probes have appropriate timeouts" (nuance student might miss)

**Role 2: AI as Student**
- Student: "I don't have Prometheus installed on this cluster"
- AI adapts checklist to skip monitoring verification or suggest alternative

**Role 3: AI as Co-Worker**
- Together work through checklist, AI explains each check, student executes and reports

**Content Elements**:
- Production readiness checklist (10 items)
- kubectl commands for each verification
- Expected output for passing checks
- Common failures and fixes

**Teaching Modality**: Collaborative Debugging (work through checklist together)

**Prerequisites**: L05 or L07 (deployment running on cloud)

**Estimated Time**: 25 minutes

**Production Readiness Checklist**:
```markdown
## Production Readiness Checklist

| # | Check | Command | Pass Criteria |
|---|-------|---------|---------------|
| 1 | Health endpoint responds | `curl https://domain/health` | HTTP 200 |
| 2 | Resource limits set | `kubectl describe pod <pod>` | Limits visible |
| 3 | Replicas >= 2 | `kubectl get deploy` | READY shows 2+ |
| 4 | Liveness probe configured | `kubectl get deploy -o yaml` | livenessProbe present |
| 5 | Readiness probe configured | `kubectl get deploy -o yaml` | readinessProbe present |
| 6 | TLS certificate valid | `curl -v https://domain` | Certificate OK |
| 7 | Secrets not in env vars | `kubectl describe pod` | No sensitive values |
| 8 | Pod disruption budget | `kubectl get pdb` | PDB exists |
| 9 | HPA configured (if needed) | `kubectl get hpa` | HPA exists |
| 10 | Cost estimate documented | Provider dashboard | Monthly cost known |
```

**Reflect on Your Skill Section**:
```markdown
### Reflect on Your Skill

Test your `multi-cloud-deployer` skill:
- Does it include a production readiness checklist?
- Can it generate verification commands?

If gaps exist, update your skill with production validation patterns.
```

---

### L09: Same Patterns, Different Clouds (Layer 2: AI Collaboration)

**Learning Objective**: Demonstrate that kubectl, Helm, Dapr, and Ingress commands are identical across cloud providers, with only provisioning differing

**Stage**: 2 (AI Collaboration)

**CEFR Proficiency**: B1

**New Concepts** (count: 4):
1. Universal Kubernetes commands
2. Provision -> Connect -> Deploy pattern
3. Quick-start references for AKS, GKE, EKS, Civo
4. Multi-cloud skill portability

**Cognitive Load Validation**: 4 concepts < 10 limit = WITHIN LIMIT

**Maps to Evals**: SC-004, SC-007

**Three Roles Demonstrations** (INVISIBLE):

**Role 1: AI as Teacher**
- AI shows: "Here's the same Helm install on AKS—notice only the cluster provisioning changed"

**Role 2: AI as Student**
- Student: "I want to understand EKS provisioning too"
- AI adapts to include EKS example

**Role 3: AI as Co-Worker**
- Together build a comparison table showing provider-specific vs universal commands

**Content Elements**:
- Side-by-side comparison: DOKS vs AKS vs GKE vs EKS vs Civo
- The "90% identical" insight reinforced
- Quick-start provisioning commands for each provider
- Same kubectl/Helm/Dapr commands demonstrated

**Teaching Modality**: Comparison/Contrast (side-by-side analysis)

**Prerequisites**: L03 (DOKS provisioning), L07 (Hetzner alternative)

**Estimated Time**: 20 minutes

**Multi-Cloud Comparison Table**:
```markdown
## The Universal Pattern

| Step | DigitalOcean | Azure | Google | AWS | Civo |
|------|-------------|-------|--------|-----|------|
| **Provision** | `doctl k8s cluster create` | `az aks create` | `gcloud container clusters create` | `eksctl create cluster` | `civo k8s create` |
| **Connect** | `doctl k8s kubeconfig save` | `az aks get-credentials` | `gcloud get-credentials` | automatic | `--merge --switch` |
| **Deploy (identical)** | `helm upgrade --install` | `helm upgrade --install` | `helm upgrade --install` | `helm upgrade --install` | `helm upgrade --install` |
| **Dapr (identical)** | `dapr init -k` | `dapr init -k` | `dapr init -k` | `dapr init -k` | `dapr init -k` |
| **Ingress (identical)** | `helm install traefik` | `helm install traefik` | `helm install traefik` | `helm install traefik` | `helm install traefik` |
```

**Reflect on Your Skill Section**:
```markdown
### Reflect on Your Skill

Test your `multi-cloud-deployer` skill:
- Can it generate provisioning commands for at least 3 providers?
- Does it emphasize the "provision -> connect -> deploy" universal pattern?

If gaps exist, update your skill with multi-cloud quick-start references.
```

---

### L10: Capstone - Full Production Deployment (Layer 4: Spec-Driven Orchestration)

**Learning Objective**: Complete an end-to-end production deployment using specification-first approach and composed skills, producing a deployable Digital FTE component

**Stage**: 4 (Spec-Driven Integration — Capstone)

**CEFR Proficiency**: B1

**Maps to Evals**: ALL (SC-001 through SC-008)

**Content Elements**:

**1. Specification Writing** (PRIMARY SKILL):
- Student writes deployment-spec.md FIRST
- Includes: target provider, domain, resource requirements, success criteria
- No code yet (spec FIRST)

**2. Component Composition**:
- Which skills from L00-L09 apply?
  - multi-cloud-deployer skill (L00)
  - Kubernetes fundamentals (Ch50)
  - Helm chart patterns (Ch51)
  - Dapr sidecar (Ch53)
  - Ingress/TLS (Ch56)
- How do they compose into deployment workflow?

**3. AI Orchestration**:
- AI implements spec using composed skills
- Student validates against spec criteria
- Three deployment path choices:
  - Path A: DigitalOcean DOKS (production path)
  - Path B: Hetzner + K3s (budget path)
  - Path C: Azure AKS (enterprise path, quick-start only)

**4. Convergence Loop**:
- Iteration 1: Initial deployment attempt
- Feedback: Something doesn't work (common: TLS, DNS, secrets)
- Iteration 2: Debug and fix with AI
- Final: Working HTTPS endpoint

**5. Teardown and Cost Verification**:
- Complete teardown commands
- Verify $0 ongoing cost

**Capstone Specification Template**:
```markdown
# Deployment Specification: Task API Production

## Target Environment
- Provider: [DOKS | Hetzner | AKS]
- Region: [region]
- Cluster Name: task-api-prod
- Domain: tasks.yourdomain.com

## Resource Requirements
- Nodes: 3
- Node Size: 2 vCPU, 4GB RAM
- Replicas: 2
- Memory Limit: 512Mi
- CPU Limit: 500m

## Stack Components
- [x] Task API (FastAPI + SQLModel)
- [x] Dapr sidecar (state management)
- [x] Traefik Ingress
- [x] cert-manager + Let's Encrypt

## Success Criteria
- [ ] Cluster provisioned in < 10 minutes
- [ ] Full deployment in < 30 minutes
- [ ] HTTPS endpoint accessible
- [ ] Health check returns 200
- [ ] Teardown verified ($0 cost)

## Non-Goals
- [ ] Database persistence (use in-memory for capstone)
- [ ] Monitoring stack (covered in Ch55)
- [ ] CI/CD integration (covered in Ch54)
```

**Prerequisites**: L01-L09 (accumulated intelligence)

**Estimated Time**: 45 minutes

**Digital FTE Outcome**: Student has a reusable `multi-cloud-deployer` skill that can generate accurate CLI commands for DigitalOcean, Hetzner, Azure, and others. This skill is a component of their Digital FTE portfolio.

**Reflect on Your Skill Section**:
```markdown
### Reflect on Your Skill

Your `multi-cloud-deployer` skill has evolved through this chapter.

**Final Test**: Ask your skill:
"Generate a complete deployment plan for Task API on DigitalOcean DOKS with Dapr, Ingress, and TLS."

**Evaluate the output**:
- Does it include all provisioning commands?
- Does it include the deployment sequence?
- Does it include verification steps?
- Does it include teardown commands?

**Your skill is production-ready when**:
- It generates accurate CLI commands for at least 3 providers
- It includes the universal "provision -> connect -> deploy" pattern
- It can answer questions about cost and tradeoffs

This skill is now part of your Digital FTE portfolio.
```

---

## IV. Skill Dependency Mapping

### Skill Dependency Graph

```
[Kubernetes fundamentals] (Ch50) ---+
                                    |
[Helm chart patterns] (Ch51) -------+---> [multi-cloud-deployer] (Ch60 L00)
                                    |            |
[Dapr sidecar] (Ch53) --------------+            |
                                    |            v
[Ingress/TLS] (Ch56) ---------------+    [Production deployment]
                                                  |
[Docker containerization] (Ch49) ---------------->|
                                                  |
                                                  v
                                         [Digital FTE Component]
```

### Cross-Chapter Dependencies

| Prerequisite Chapter | Skills Required | Status |
|---------------------|-----------------|--------|
| Ch49: Docker | Container images, GHCR publishing | Implemented |
| Ch50: Kubernetes | kubectl, Deployments, Services | Implemented |
| Ch51: Helm | Chart installation, values customization | Implemented |
| Ch53: Dapr Core | Sidecar pattern, dapr init | Implemented |
| Ch54: CI/CD | GHCR image availability | Implemented |
| Ch56: Traffic Engineering | Ingress, cert-manager, TLS | Implemented |

**Validation**: All prerequisite chapters are implemented. Ch60 can proceed.

---

## V. Assessment Plan

### Formative Assessments (During Lessons)

| Lesson | Assessment Type | Focus |
|--------|-----------------|-------|
| L01 | Quiz | Managed vs self-managed tradeoffs |
| L02 | Verification | doctl auth successful |
| L03 | Verification | kubectl get nodes shows DOKS cluster |
| L04 | Verification | LoadBalancer has EXTERNAL-IP |
| L05 | Verification | curl https://domain returns 200 |
| L06 | Verification | Secrets mounted correctly |
| L07 | Verification | kubectl get nodes shows Hetzner cluster |
| L08 | Checklist | 10-item production readiness |
| L09 | Comparison | Provider-specific vs universal commands |

### Summative Assessment (End of Chapter)

**L10 Capstone Project**:
- Write deployment specification
- Execute complete deployment to chosen provider
- Verify HTTPS endpoint
- Complete teardown
- Demonstrate skill generates accurate commands for 3+ providers

**Rubric**:
| Criterion | Weight | Pass Criteria |
|-----------|--------|---------------|
| Spec completeness | 20% | All required sections present |
| Deployment success | 40% | HTTPS endpoint accessible |
| Skill quality | 30% | Generates commands for 3+ providers |
| Teardown verification | 10% | $0 ongoing cost confirmed |

---

## VI. Teaching Modality Variation

**Anti-convergence check**: Vary modality from Ch59 (Dapr Actors & Workflows)

| Lesson | Teaching Modality | Differentiation from Ch59 |
|--------|-------------------|---------------------------|
| L01 | Direct Teaching + Tables | Ch59 used Hands-On Discovery |
| L02 | Hands-On Discovery | Different focus (setup vs patterns) |
| L03 | Hands-On Discovery | Similar but cloud-specific |
| L04 | Direct Teaching | Ch59 heavy on code examples |
| L05 | Spec-First + AI Collab | Ch59 used Collaborative Debugging |
| L06 | Socratic Dialogue | Ch59 used Direct Teaching |
| L07 | Hands-On Discovery | Alternative path format |
| L08 | Collaborative Debugging | Checklist-driven |
| L09 | Comparison/Contrast | Unique to this chapter |
| L10 | Spec-Driven Capstone | Standard capstone format |

**Modality within chapter varies**: No two consecutive lessons use identical modality.

---

## VII. Hardware/Account Requirements

| Lesson | Local Dev | Cloud Account | Cost Estimate |
|--------|-----------|---------------|---------------|
| L00 | skills-lab | None | $0 |
| L01 | None | None | $0 |
| L02-L06 | Docker Desktop | DigitalOcean | ~$24+/mo while running |
| L07 | Docker Desktop | Hetzner Cloud | ~$5/mo while running |
| L08-L09 | Docker Desktop | Active cluster | Depends on choice |
| L10 | Docker Desktop | Choice of provider | $5-$50/mo while running |

**Cost Management Note**: All lessons include explicit teardown instructions. Students should delete clusters after each session if cost is a concern.

---

## VIII. Expertise Skill Integration

**Source**: `.claude/skills/building-with-multi-cloud/SKILL.md`

This expertise skill contains verified CLI patterns for:
- DigitalOcean DOKS
- Azure AKS
- Google GKE
- AWS EKS
- Civo
- Hetzner + K3s

**Usage in lessons**:
- L03: DOKS commands from expertise skill
- L07: Hetzner + K3s commands from expertise skill
- L09: Multi-cloud comparison from expertise skill

**Student skill**: `multi-cloud-deployer` (created in L00) will be a simplified version targeting student's specific needs.

---

## IX. Validation Checklist

**Chapter-Level Validation**:
- [x] Chapter type identified (Technical)
- [x] Concept density analysis documented (12 concepts)
- [x] Lesson count justified (11 lessons for 12 concepts + Skill-First pattern)
- [x] All evals from spec covered by lessons
- [x] All lessons map to at least one eval

**Stage Progression Validation**:
- [x] L00: Layer 3 (Skill-First)
- [x] L01-L04, L07: Layer 1 (Manual Foundation)
- [x] L05-L06, L08-L09: Layer 2 (AI Collaboration with Three Roles)
- [x] L10: Layer 4 (Spec-Driven Integration / Capstone)
- [x] Progression follows Skill-First -> Manual -> AI Collab -> Capstone

**Cognitive Load Validation**:
- [x] Each lesson's concept count < B1 tier limit (10 concepts)
- [x] Maximum concepts in any lesson: 6 (well under limit)
- [x] Heavy scaffolding in L1 lessons, moderate in L2

**Three Roles Validation** (Layer 2 lessons):
- [x] L05: All three roles demonstrated (invisible to student)
- [x] L06: All three roles demonstrated (invisible to student)
- [x] L08: All three roles demonstrated (invisible to student)
- [x] L09: All three roles demonstrated (invisible to student)

**Skill-First Validation**:
- [x] L00 comes FIRST (before content lessons)
- [x] Every lesson (L01-L10) ends with "Reflect on Your Skill" section
- [x] Student skill name: multi-cloud-deployer

**Expertise Skill Reference**:
- [x] `.claude/skills/building-with-multi-cloud/SKILL.md` exists and is referenced

**Expected Outputs**:
- [x] All code examples include expected output blocks (SC-008)

---

## X. Implementation Notes for Content Writers

### Quality Reference

Match quality of:
- `/Users/mjs/Documents/code/panaversity-official/tutorsgpt/ag-factory/apps/learn-app/docs/07-AI-Cloud-Native-Development/50-kubernetes-for-ai-services/01-kubernetes-architecture-declarative-model.md`
- `/Users/mjs/Documents/code/panaversity-official/tutorsgpt/ag-factory/apps/learn-app/docs/07-AI-Cloud-Native-Development/50-kubernetes-for-ai-services/00-build-your-kubernetes-skill.md`

### YAML Frontmatter Requirements

Every lesson MUST include:
```yaml
---
sidebar_position: X
chapter: 60
lesson: X
duration_minutes: X
title: "..."
proficiency_level: B1
teaching_stage: 1|2|3|4
stage_name: "Manual Foundation|AI Collaboration|Intelligence Design|Spec-Driven Integration"
cognitive_load:
  concepts_count: X
  scaffolding_level: "Heavy|Moderate|Light"
learning_objectives:
  - id: LOX
    description: "..."
    bloom_level: "Remember|Understand|Apply|Analyze|Evaluate|Create"
---
```

### Three Roles in L2 Lessons

**CRITICAL**: Framework must be INVISIBLE. No meta-commentary like "AI as Teacher" or "What to notice."

Student experiences Three Roles through:
- Action prompts (what to DO)
- Self-reflection questions (what to THINK about)
- Validation checks (how to EVALUATE outcomes)

NOT through:
- Meta-commentary explaining roles
- Framework labels
- Scaffolding exposition

### Reflect on Your Skill Template

Every lesson MUST end with this section:
```markdown
## Reflect on Your Skill

[Test prompt for student skill]

[Questions about skill gaps]

[Update prompt if gaps exist]
```

---

## XI. Success Metrics

**This plan succeeds when**:
- All 11 lessons implemented matching this structure
- Skill-First pattern followed (L00 first)
- All "Reflect on Your Skill" sections present
- All expected output blocks included
- Three Roles invisible in L2 lessons
- Capstone produces working HTTPS deployment
- Students' multi-cloud-deployer skill generates commands for 3+ providers

**This plan fails when**:
- Lessons skip "Reflect on Your Skill" sections
- Three Roles framework exposed in student-facing text
- Expected output blocks missing
- Capstone doesn't require spec-first approach
- Teaching modality identical across consecutive lessons

---

## XII. Project Structure (Educational Content)

### Documentation Output Path

```text
apps/learn-app/docs/07-AI-Cloud-Native-Development/60-real-cloud-deployment/
├── README.md                              # Chapter introduction
├── 00-build-your-cloud-deployment-skill.md   # L00 - Skill-First
├── 01-beyond-docker-desktop.md            # L01 - Manual Foundation
├── 02-digitalocean-account-setup.md       # L02 - Manual Foundation
├── 03-provisioning-doks-cluster.md        # L03 - Manual Foundation
├── 04-cloud-load-balancer-dns.md          # L04 - Manual Foundation
├── 05-deploying-task-api-to-doks.md       # L05 - AI Collaboration
├── 06-production-secrets-configuration.md # L06 - AI Collaboration
├── 07-personal-cloud-lab-hetzner.md       # L07 - Manual Foundation
├── 08-production-checklist-verification.md # L08 - AI Collaboration
├── 09-same-patterns-different-clouds.md   # L09 - AI Collaboration
└── 10-capstone-full-production.md         # L10 - Spec-Driven Capstone
```

### Spec Documentation

```text
specs/001-ch60-cloud-deployment/
├── spec.md              # Chapter specification (input)
├── plan.md              # This file (plan output)
├── checklists/
│   └── production-readiness.md
└── tasks.md             # Implementation tasks (next phase)
```

---

**Plan Version**: 1.0.0
**Constitution Alignment**: v7.0.0 (Agent Factory Paradigm)
**Spec Alignment**: `/Users/mjs/Documents/code/panaversity-official/tutorsgpt/ag-factory/specs/001-ch60-cloud-deployment/spec.md`
