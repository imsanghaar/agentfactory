# Chapter 59: Cost and Disaster Recovery - Implementation Plan

**Generated by**: chapter-planner v2.0.0 (Reasoning-Activated)
**Source Spec**: specs/001-chapter-59-cost-disaster-recovery/spec.md
**Expertise Skill**: .claude/skills/operational-excellence/SKILL.md
**Created**: 2025-12-30
**Constitution**: v6.0.0 (Reasoning Mode)

---

## I. Chapter Analysis

### Chapter Type

**Technical/Code-Focused** - This chapter teaches practical implementation of cost visibility, backup/recovery, and chaos engineering using Kubernetes tools (VPA, OpenCost, Velero, Chaos Mesh). All lessons require code examples and YAML manifests.

**Rationale**: The spec explicitly requires students to:
- Deploy VPA and interpret recommendations
- Query OpenCost API for cost allocation
- Create Velero Schedule CRDs with backup hooks
- Execute Chaos Mesh experiments
- Apply cost labels to Kubernetes resources

### Concept Density Analysis

**Core Concepts** (from spec): 12 concepts

| # | Concept | Complexity |
|---|---------|------------|
| 1 | FinOps cycle (Visibility->Optimization->Operation) | Standard |
| 2 | Cloud cost components (compute, storage, network, egress) | Simple |
| 3 | VPA modes (Off, Initial, Recreate) | Standard |
| 4 | VPA + HPA coexistence patterns | Standard |
| 5 | OpenCost cost allocation | Standard |
| 6 | Cost allocation labels strategy | Simple |
| 7 | RTO vs RPO concepts | Simple |
| 8 | 3-2-1 backup rule | Simple |
| 9 | Velero CRDs (Backup, Schedule, Restore) | Standard |
| 10 | Velero backup hooks (pre/post) | Standard |
| 11 | Chaos engineering principles | Simple |
| 12 | Chaos Mesh PodChaos experiments | Standard |

**Complexity Assessment**: Standard (6-8 standard + 4 simple concepts)

**Proficiency Tier**: B1 (from spec and chapter-index.md)

### Justified Lesson Count: 10 lessons

**Calculation**:
- **L00 (Layer 3)**: Build skill first (SKILL-FIRST pattern requirement)
- **L01-L04 (Layer 1)**: Cost fundamentals - 4 lessons for 6 cost-related concepts
- **L05-L06 (Layer 1->L2)**: Backup/DR - 2 lessons for 4 backup concepts
- **L07-L08 (Layer 1->L2)**: Chaos + Compliance - 2 lessons for 2 concepts
- **L09 (Layer 4)**: Capstone integration

**Total**: 10 lessons (matches spec structure)

**Reasoning**: 12 core concepts across B1 proficiency. B1 allows 7-10 concepts per lesson maximum. Distributing concepts across 9 content lessons (L01-L09) averages 1-2 new concepts per lesson, well within B1 cognitive load limits.

---

## II. Success Evals (from Spec)

**Predefined Success Criteria** (evals-first requirement):

| ID | Success Criterion | Lesson Mapping |
|----|-------------------|----------------|
| SC-001 | Students can build an operational-excellence skill that generates valid VPA and Velero manifests | L00 |
| SC-002 | Students can explain the FinOps cycle and apply it to their Task API | L01, L04 |
| SC-003 | Students can interpret VPA recommendations and calculate potential cost savings | L02 |
| SC-004 | Students can query OpenCost to break down costs by namespace and label | L03 |
| SC-005 | Students can define RTO/RPO requirements for a given business scenario | L05 |
| SC-006 | Students can create a Velero Schedule with appropriate retention and hooks | L06 |
| SC-007 | Students can execute a chaos experiment and measure recovery time | L07 |
| SC-008 | Students can articulate data sovereignty implications for multi-region deployments | L08 |
| SC-009 | Capstone produces a Task API with cost labels, backup schedule, and passing chaos test | L09 |
| SC-010 | Students demonstrate skill improvement through 9 "Reflect on Your Skill" iterations | L01-L09 |

---

## III. Lesson Sequence

### Lesson 0: Build Your Operational Excellence Skill (Layer 3: Intelligence Design)

**Learning Objective**: Create an operational-excellence skill using Claude and official documentation to encode cost visibility, backup/recovery, and chaos engineering patterns.

**Stage**: 3 (Intelligence Design) - Skill-First Pattern

**CEFR Proficiency**: B1

**New Concepts** (count: 1):
1. Skill-first learning pattern (building reusable intelligence before learning content)

**Cognitive Load Validation**: 1 concept <= 10 limit -> WITHIN LIMIT

**Maps to Evals**: SC-001, SC-010

**Content Elements**:
- Clone fresh skills-lab (no state assumptions)
- Write LEARNING-SPEC.md for operational excellence
- Use `/fetching-library-docs` to gather official docs:
  - VPA documentation (autoscaler repo)
  - OpenCost API patterns
  - Velero CRD reference
  - Chaos Mesh experiment types
- Use `/skill-creator` to build skill from documentation
- Test skill generates valid VPA manifest
- Test skill generates valid Velero Schedule

**Skill Components to Include**:
- Persona: SRE/FinOps expert
- Decision tree: Cost vs Backup vs Chaos paths
- VPA patterns with modes and HPA coexistence
- OpenCost queries and cost allocation labels
- Velero Schedule with hooks template
- PodChaos experiment template
- Safety guardrails (staging-first, validation)

**Prerequisites**: Ch55 observability-cost-engineer skill (pattern familiarity)

**Estimated Time**: 15 minutes

**File**: `00-build-your-operational-excellence-skill.md`

---

### Lesson 1: Cloud Cost Fundamentals (Layer 1: Manual Foundation)

**Learning Objective**: Identify the components that drive Kubernetes cluster costs and explain how they apply to Task API.

**Stage**: 1 (Manual Foundation)

**CEFR Proficiency**: B1

**New Concepts** (count: 3):
1. Compute costs (CPU/memory requests and limits)
2. Storage costs (PVC, volume types)
3. Network costs (egress, cross-zone traffic)

**Cognitive Load Validation**: 3 concepts <= 10 limit -> WITHIN LIMIT

**Maps to Evals**: SC-002

**Content Elements**:
- **NO AI yet** (Layer 1 requirement)
- Explain cost components with Task API examples
- Cost comparison table: compute vs storage vs network
- Manual exercise: Examine Task API deployment YAML
- Calculate relative cost impact of different resource configurations
- Cost formula: `max(request, usage) x hourly_rate`
- FinOps introduction: Visibility -> Optimization -> Operation cycle

**Code Examples**:
```yaml
# Task API Deployment with cost-relevant fields highlighted
resources:
  requests:
    cpu: 100m      # <- Compute cost (billed)
    memory: 128Mi  # <- Memory cost (billed)
  limits:
    cpu: 500m
    memory: 256Mi
```

**Prerequisites**: Ch50 resource requests/limits basics

**Estimated Time**: 20 minutes

**File**: `01-cloud-cost-fundamentals.md`

**Reflect on Your Skill Section**:
- Test: Ask skill to explain cost components for a sample deployment
- Identify gaps: Does skill include cost formula?
- Improve: Add cost calculation patterns if missing

---

### Lesson 2: Right-Sizing with VPA (Layer 1: Manual Foundation)

**Learning Objective**: Install VPA, apply it to Task API in "Off" mode, and interpret recommendations to identify potential cost savings.

**Stage**: 1 (Manual Foundation)

**CEFR Proficiency**: B1

**New Concepts** (count: 3):
1. VPA architecture (Recommender, Updater, Admission Controller)
2. VPA modes (Off, Initial, Recreate)
3. VPA + HPA coexistence patterns

**Cognitive Load Validation**: 3 concepts <= 10 limit -> WITHIN LIMIT

**Maps to Evals**: SC-003

**Content Elements**:
- Install VPA via Helm (from skill's knowledge)
- VPA CRD walkthrough with Task API target
- Apply VPA in Off mode (recommendations only)
- Wait for pod to run, check VPA status for recommendations
- Interpret target/lower/upper bounds
- Calculate potential savings: current requests vs recommended
- **Safety**: Always start with Off mode; validate before Recreate
- **VPA + HPA coexistence**: Never use VPA Recreate with HPA on same metrics

**Code Examples**:
```yaml
apiVersion: autoscaling.k8s.io/v1
kind: VerticalPodAutoscaler
metadata:
  name: task-api-vpa
spec:
  targetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: task-api
  updatePolicy:
    updateMode: "Off"  # Start here - recommendations only
  resourcePolicy:
    containerPolicies:
    - containerName: task-api
      minAllowed:
        cpu: 100m
        memory: 128Mi
      maxAllowed:
        cpu: 2000m
        memory: 2Gi
```

**Prerequisites**: L01 (cost fundamentals)

**Estimated Time**: 25 minutes

**File**: `02-right-sizing-with-vpa.md`

**Reflect on Your Skill Section**:
- Test: Ask skill to generate VPA CRD for a new service
- Identify gaps: Does skill warn about VPA+HPA conflicts?
- Improve: Add VPA mode decision framework if missing

---

### Lesson 3: OpenCost/Kubecost Visibility (Layer 1: Manual Foundation)

**Learning Objective**: Install OpenCost, query the allocation API, and break down costs by namespace and team labels.

**Stage**: 1 (Manual Foundation)

**CEFR Proficiency**: B1

**New Concepts** (count: 2):
1. OpenCost architecture (Prometheus integration)
2. Cost allocation queries (by namespace, label, pod)

**Cognitive Load Validation**: 2 concepts <= 10 limit -> WITHIN LIMIT

**Maps to Evals**: SC-004

**Content Elements**:
- Install OpenCost via Helm with Prometheus connection
- Verify OpenCost pod is running
- Query `/allocation` API with `aggregate=namespace`
- Query with `aggregate=label:team`
- Understand idle cost concept: provisioned - allocated
- Exercise: Identify top cost drivers in default namespace
- Compare Kubecost (commercial) vs OpenCost (CNCF open source)

**Code Examples**:
```bash
# Cost by namespace
curl -G http://opencost:9003/allocation \
  -d window=7d \
  -d aggregate=namespace

# Cost by team label
curl -G http://opencost:9003/allocation \
  -d window=7d \
  -d aggregate=label:team \
  -d shareIdle=true
```

**Prerequisites**: L01-L02, Ch55 Prometheus installed

**Estimated Time**: 25 minutes

**File**: `03-opencost-visibility.md`

**Reflect on Your Skill Section**:
- Test: Ask skill to generate OpenCost query for specific use case
- Identify gaps: Does skill include idle cost distribution?
- Improve: Add API query patterns for showback reports

---

### Lesson 4: FinOps Practices and Budget Alerts (Layer 1: Manual Foundation)

**Learning Objective**: Implement a tagging strategy with cost allocation labels and understand the showback-before-chargeback progression.

**Stage**: 1 (Manual Foundation)

**CEFR Proficiency**: B1

**New Concepts** (count: 2):
1. Cost allocation labels strategy (team, app, environment, cost-center)
2. FinOps progression: Showback -> Allocation -> Chargeback

**Cognitive Load Validation**: 2 concepts <= 10 limit -> WITHIN LIMIT

**Maps to Evals**: SC-002

**Content Elements**:
- Define required labels for all resources:
  - `team`: Team ownership
  - `app`: Application name
  - `environment`: dev/staging/production
  - `cost-center`: Budget owner
- Add labels to Task API deployment
- Query OpenCost with new labels
- FinOps maturity model: visibility first, then allocation, then chargeback
- Why showback before chargeback (build trust with data)
- Budget alerts concept (conceptual - full implementation in Ch55)

**Code Examples**:
```yaml
metadata:
  labels:
    team: product-team
    app: task-api
    environment: production
    cost-center: engineering
```

**Prerequisites**: L03 (OpenCost basics)

**Estimated Time**: 20 minutes

**File**: `04-finops-practices-budget-alerts.md`

**Reflect on Your Skill Section**:
- Test: Ask skill for recommended labels for a new microservice
- Identify gaps: Does skill explain FinOps maturity stages?
- Improve: Add tagging strategy template if missing

---

### Lesson 5: Backup Fundamentals (Layer 1: Manual Foundation)

**Learning Objective**: Define RTO and RPO requirements for Task API and explain how the 3-2-1 backup rule ensures data protection.

**Stage**: 1 (Manual Foundation)

**CEFR Proficiency**: B1

**New Concepts** (count: 3):
1. RTO (Recovery Time Objective)
2. RPO (Recovery Point Objective)
3. 3-2-1 backup rule

**Cognitive Load Validation**: 3 concepts <= 10 limit -> WITHIN LIMIT

**Maps to Evals**: SC-005

**Content Elements**:
- RTO definition: Maximum acceptable downtime
- RPO definition: Maximum acceptable data loss
- Business scenario exercise: "Task API must lose no more than 1 hour of data, recover within 2 hours"
- Map requirements to backup frequency and restore procedures
- 3-2-1 rule:
  - 3 copies of data
  - 2 different storage types (local + object storage)
  - 1 off-site location
- Backup strategy comparison table:

| Strategy | RTO | RPO | Cost |
|----------|-----|-----|------|
| Daily backups | 2-4h | 24h | Low |
| Hourly backups | 1-2h | 1h | Medium |
| 15-min backups | 30min | 15min | High |

**Prerequisites**: None (conceptual foundation)

**Estimated Time**: 20 minutes

**File**: `05-backup-fundamentals.md`

**Reflect on Your Skill Section**:
- Test: Ask skill to recommend backup strategy for given RTO/RPO
- Identify gaps: Does skill include 3-2-1 rule?
- Improve: Add RTO/RPO decision framework if missing

---

### Lesson 6: Velero for K8s Backup/Restore (Layer 1 -> Layer 2: Manual to AI Collaboration)

**Learning Objective**: Install Velero with MinIO backend and create a Schedule CRD that backs up Task API namespace daily with 30-day retention.

**Stage**: 1 -> 2 (Manual foundation with AI collaboration)

**CEFR Proficiency**: B1

**New Concepts** (count: 3):
1. Velero CRDs (Backup, Schedule, Restore, BackupStorageLocation)
2. Backup hooks (pre/post commands for database consistency)
3. Velero restore procedures

**Cognitive Load Validation**: 3 concepts <= 10 limit -> WITHIN LIMIT

**Maps to Evals**: SC-006

**Content Elements**:

**Layer 1 Section (Manual)**:
- Install Velero via Helm with MinIO for local development
- Create BackupStorageLocation pointing to MinIO
- Velero CRD walkthrough: Backup vs Schedule
- TTL for retention (720h = 30 days)

**Layer 2 Section (AI Collaboration)**:
**Three Roles Demonstrations**:

1. **AI as Teacher**: Student provides basic Schedule CRD, AI suggests adding backup hooks for database consistency
   - AI teaches pre/post hook pattern for Postgres `pg_dump`
   - Student learns database-aware backup pattern they didn't know

2. **AI as Student**: Student specifies "I need 7-day retention, not 30-day"
   - AI adapts: Changes `ttl: 720h` to `ttl: 168h`
   - AI asks: "Do you want weekday vs weekend retention differences?"

3. **AI as Co-Worker**: Student and AI iterate on hook timeout values
   - Initial: AI suggests 60s timeout
   - Student: "Our database dump takes 3 minutes"
   - Final: Converge on 300s with onError: Fail

**Code Examples**:
```yaml
apiVersion: velero.io/v1
kind: Schedule
metadata:
  name: task-api-daily
  namespace: velero
spec:
  schedule: "0 2 * * *"  # 2 AM daily
  template:
    includedNamespaces:
      - production
    snapshotVolumes: true
    ttl: 720h  # 30-day retention
    hooks:
      resources:
        - name: db-freeze
          includedNamespaces: [production]
          pre:
            - exec:
                container: postgres
                command: ["/bin/sh", "-c", "pg_dump -U app -d taskdb > /tmp/backup.sql"]
                onError: Fail
                timeout: 60s
```

**Restore Procedure**:
```bash
velero restore create --from-schedule task-api-daily
```

**Prerequisites**: L05 (RTO/RPO concepts)

**Estimated Time**: 30 minutes

**File**: `06-velero-backup-restore.md`

**Reflect on Your Skill Section**:
- Test: Ask skill to generate Schedule with custom retention and hooks
- Identify gaps: Does skill include restore verification pattern?
- Improve: Add disaster recovery runbook template if missing

---

### Lesson 7: Chaos Engineering Basics (Layer 1 -> Layer 2: Manual to AI Collaboration)

**Learning Objective**: Install Chaos Mesh, create a PodChaos experiment for Task API, and measure recovery time against RTO.

**Stage**: 1 -> 2 (Manual foundation with AI collaboration)

**CEFR Proficiency**: B1

**New Concepts** (count: 3):
1. Chaos engineering principles ("break things on purpose")
2. PodChaos experiments (pod-kill, pod-failure)
3. Game Day patterns for structured resilience testing

**Cognitive Load Validation**: 3 concepts <= 10 limit -> WITHIN LIMIT

**Maps to Evals**: SC-007

**Content Elements**:

**Layer 1 Section (Manual)**:
- Why chaos engineering: Test failures before production surprises
- Install Chaos Mesh via Helm with namespace filtering enabled
- Annotate staging namespace for chaos experiments
- PodChaos experiment walkthrough

**Safety Features**:
- Namespace filtering: Only annotated namespaces
- Duration limits: Experiments auto-cleanup
- Selectors: Precise targeting by label

**Layer 2 Section (AI Collaboration)**:
**Three Roles Demonstrations**:

1. **AI as Teacher**: Student wants to test pod failures, AI suggests Game Day pattern
   - AI teaches: Define hypothesis first, set up monitoring, run in staging, observe, document
   - Student learns structured approach vs ad-hoc testing

2. **AI as Student**: Student says "Our RTO is 30 seconds"
   - AI adapts: Suggests adding Prometheus recording rule to measure actual recovery time
   - AI learns student's specific SLO requirements

3. **AI as Co-Worker**: Iterate on chaos experiment scope
   - Initial: AI suggests killing all pods
   - Student: "Too aggressive for first test"
   - Final: Converge on `mode: one` to kill single pod first

**Code Examples**:
```yaml
apiVersion: chaos-mesh.org/v1alpha1
kind: PodChaos
metadata:
  name: task-api-pod-kill
spec:
  action: pod-kill
  mode: one  # Start conservative
  selector:
    namespaces: [staging]  # Start in staging!
    labelSelectors:
      app: task-api
  duration: "30s"
```

**Game Day Checklist**:
1. Define hypothesis: "Task API recovers within 30s after pod kill"
2. Set up monitoring (Grafana dashboard)
3. Run experiment in staging
4. Observe and document behavior
5. Fix issues, re-test
6. Graduate to production (off-peak hours)

**Prerequisites**: L05-L06 (backup provides safety net)

**Estimated Time**: 30 minutes

**File**: `07-chaos-engineering-basics.md`

**Reflect on Your Skill Section**:
- Test: Ask skill to design chaos experiment for specific scenario
- Identify gaps: Does skill include Game Day pattern?
- Improve: Add chaos experiment templates for NetworkChaos if missing

---

### Lesson 8: Data Sovereignty and Compliance (Layer 1: Manual Foundation)

**Learning Objective**: Articulate GDPR implications for multi-region deployments and explain how audit trails support compliance.

**Stage**: 1 (Manual Foundation)

**CEFR Proficiency**: B1

**New Concepts** (count: 2):
1. Data sovereignty and residency requirements
2. Audit trails for compliance

**Cognitive Load Validation**: 2 concepts <= 10 limit -> WITHIN LIMIT

**Maps to Evals**: SC-008

**Content Elements**:
- Data sovereignty: Legal requirements for where data must reside
- GDPR implications: EU data must stay in EU regions
- Backup location considerations: Where Velero stores backups matters
- Encryption requirements: At-rest and in-transit
- Audit trails:
  - Kubernetes audit logs
  - Velero backup logs
  - Access control audit
- Conceptual overview (not deep implementation - B1 level)

**Examples**:
- Task API stores user data -> If users are in EU, backups must be in EU
- Velero BackupStorageLocation can specify region
- Multi-region deployment patterns (conceptual)

**NOT in scope** (mentioned but deferred):
- SOC2, ISO27001 certification processes
- Full compliance automation

**Prerequisites**: L06 (Velero backup storage)

**Estimated Time**: 20 minutes

**File**: `08-data-sovereignty-compliance.md`

**Reflect on Your Skill Section**:
- Test: Ask skill about data residency for specific region
- Identify gaps: Does skill warn about cross-border backup storage?
- Improve: Add compliance checklist template if missing

---

### Lesson 9: Capstone - Resilient, Cost-Aware Task API (Layer 4: Spec-Driven Integration)

**Learning Objective**: Create a production-ready Task API with cost labels, scheduled backups, and validated resilience through chaos testing, using specification-first approach.

**Stage**: 4 (Spec-Driven Integration)

**CEFR Proficiency**: B1

**New Concepts** (count: 1):
1. Integration patterns: Combining cost, backup, and chaos into cohesive operational posture

**Cognitive Load Validation**: 1 new concept (synthesis lesson) <= 10 limit -> WITHIN LIMIT

**Maps to Evals**: SC-009, SC-010 (all concepts integrated)

**Content Elements**:

**Phase 1: Write Specification (Spec-First)**
```markdown
# Task API Operational Excellence Spec

## Intent
Deploy Task API with production-grade operational excellence:
- Cost visibility and right-sizing
- Automated daily backups with 30-day retention
- Validated resilience (30-second RTO)

## Success Criteria
1. All resources have cost allocation labels visible in OpenCost
2. VPA recommendations available for right-sizing review
3. Velero Schedule running daily backups
4. Chaos experiment passes (recovery within 30s RTO)
```

**Phase 2: Component Composition**
Compose skills from L00-L08:
- Cost allocation labels from L04
- VPA from L02
- Velero Schedule from L06
- PodChaos experiment from L07

**Phase 3: AI Orchestration**
- AI implements spec using operational-excellence skill
- Student validates against spec requirements

**Phase 4: Convergence and Validation**
- Run through verification checklist
- Measure actual recovery time against 30s RTO
- Verify cost labels appear in OpenCost
- Verify backup schedule is running

**Complete Verification Checklist**:

| Component | Command | Expected |
|-----------|---------|----------|
| Cost labels | `kubectl get deploy task-api -o yaml | grep -A5 labels` | team, app, cost-center |
| VPA | `kubectl get vpa task-api-vpa -o jsonpath='{.status.recommendation}'` | Recommendations present |
| OpenCost | `curl localhost:9003/allocation?aggregate=label:team` | Cost breakdown by team |
| Velero Schedule | `velero schedule get` | task-api-daily active |
| Last backup | `velero backup get` | Completed within 24h |
| Chaos test | Apply PodChaos, measure recovery | < 30s |

**Code Examples**:

**Complete Deployment with Labels**:
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: task-api
  labels:
    app: task-api
    team: product-team
    environment: production
    cost-center: engineering
spec:
  replicas: 3
  # ... full deployment spec
```

**Capstone Artifacts**:
1. Task API Deployment with cost labels
2. VPA in Off mode
3. Velero Schedule with 30-day retention
4. PodChaos experiment definition
5. Verification script

**Prerequisites**: L00-L08 (all concepts)

**Estimated Time**: 40 minutes

**File**: `09-capstone-resilient-cost-aware-task-api.md`

**Reflect on Your Skill Section**:
- Final test: Use skill to generate complete operational excellence configuration for new service
- Verify skill covers all chapter concepts
- Finalize skill as production-ready asset

---

## IV. Skill Dependencies

**Skill Dependency Graph**:
```
L00: operational-excellence skill (created from docs)
  |
  v
L01: Cost fundamentals -> skill: add cost model
  |
  v
L02: VPA right-sizing -> skill: add VPA patterns
  |
  v
L03: OpenCost visibility -> skill: add cost queries
  |
  v
L04: FinOps practices -> skill: add tagging strategy
  |
  v
L05: Backup fundamentals -> skill: add RTO/RPO framework
  |
  v
L06: Velero backup/restore -> skill: add Velero patterns
  |
  v
L07: Chaos engineering -> skill: add PodChaos patterns
  |
  v
L08: Data sovereignty -> skill: add compliance notes
  |
  v
L09: Capstone -> skill finalized as production asset
```

**Cross-Chapter Dependencies**:
- **Ch50**: Kubernetes fundamentals (Deployments, Services, resource requests/limits)
- **Ch51**: Helm charts (for installing VPA, OpenCost, Velero, Chaos Mesh)
- **Ch55**: Prometheus (OpenCost requires Prometheus for metrics)
- **Ch56**: HPA/KEDA (understanding when VPA vs HPA applies)
- **Part 6**: Task API as running example

**Validation**: All prerequisite chapters are implemented (per chapter-index.md)

---

## V. Assessment Plan

### Formative Assessments (During Lessons)

| Lesson | Assessment Type | Description |
|--------|-----------------|-------------|
| L01 | Self-check | List cost components of Task API manifest |
| L02 | Hands-on | Apply VPA, verify recommendations appear |
| L03 | Hands-on | Query OpenCost, interpret cost breakdown |
| L04 | Code review | Verify labels added to deployment |
| L05 | Scenario | Define RTO/RPO for given business requirements |
| L06 | Hands-on | Create Schedule, verify backup runs |
| L07 | Hands-on | Execute PodChaos, measure recovery |
| L08 | Discussion | Explain data residency for EU users |
| L09 | Integration | Complete verification checklist |

### Summative Assessment (End of Chapter)

**Capstone Project** (L09):
- Cost labels visible in OpenCost query
- VPA recommendations available
- Velero backup running on schedule
- Chaos experiment passes within RTO

---

## VI. 4-Layer Teaching Progression Validation

| Layer | Lessons | Validation |
|-------|---------|------------|
| **Layer 3** | L00 | Skill-first: Build operational-excellence skill from official docs BEFORE learning content |
| **Layer 1** | L01-L04 | Manual foundation: Cost concepts, VPA, OpenCost, FinOps WITHOUT heavy AI assistance |
| **Layer 1->2** | L05-L08 | Transition: Backup fundamentals manual, Velero/Chaos with AI collaboration via Three Roles |
| **Layer 4** | L09 | Spec-driven: Write spec FIRST, compose skills, AI orchestrates implementation |

**Stage Progression Validated**:
- [x] L00: Layer 3 (Skill creation) - CORRECT for Skill-First pattern
- [x] L01-L04: Layer 1 (Manual, minimal AI)
- [x] L05-L06: Layer 1->2 (Manual foundation + AI collaboration)
- [x] L07: Layer 1->2 (AI collaboration with Three Roles)
- [x] L08: Layer 1 (Conceptual, no code)
- [x] L09: Layer 4 (Spec-driven integration)

---

## VII. CEFR Cognitive Load Validation

**Target Proficiency**: B1 (Intermediate)
**B1 Cognitive Limit**: 7-10 new concepts per lesson

| Lesson | New Concepts | Count | Status |
|--------|--------------|-------|--------|
| L00 | Skill-first pattern | 1 | WITHIN LIMIT |
| L01 | Compute, storage, network costs | 3 | WITHIN LIMIT |
| L02 | VPA architecture, modes, HPA coexistence | 3 | WITHIN LIMIT |
| L03 | OpenCost architecture, allocation queries | 2 | WITHIN LIMIT |
| L04 | Cost labels, FinOps progression | 2 | WITHIN LIMIT |
| L05 | RTO, RPO, 3-2-1 rule | 3 | WITHIN LIMIT |
| L06 | Velero CRDs, hooks, restore | 3 | WITHIN LIMIT |
| L07 | Chaos principles, PodChaos, Game Day | 3 | WITHIN LIMIT |
| L08 | Data sovereignty, audit trails | 2 | WITHIN LIMIT |
| L09 | Integration patterns (synthesis) | 1 | WITHIN LIMIT |

**All lessons within B1 cognitive load limits** (2-4 new concepts per lesson average)

---

## VIII. Three Roles Validation (Layer 2 Lessons)

**L06 (Velero)**:
- [x] AI as Teacher: Suggests backup hooks for database consistency
- [x] AI as Student: Adapts retention based on student requirements
- [x] AI as Co-Worker: Iterates on hook timeout values

**L07 (Chaos Engineering)**:
- [x] AI as Teacher: Teaches Game Day structured approach
- [x] AI as Student: Learns student's specific RTO requirements
- [x] AI as Co-Worker: Iterates on experiment scope (mode: one vs all)

---

## IX. Canonical Format Check

**Patterns Taught**:
- Skills: Operational-excellence skill follows `.claude/skills/<name>/SKILL.md` format
- CRDs: VPA, Velero, Chaos Mesh follow official Kubernetes CRD patterns

**Skill Format Verified**:
- Read `.claude/skills/operational-excellence/SKILL.md` (source of truth)
- YAML frontmatter with `name`, `description`
- Persona, Decision Tree, Core Technologies, Safety Guardrails sections
- Code examples with proper CRD structure

---

## X. File Structure

```
apps/learn-app/docs/07-AI-Cloud-Native-Development/59-cost-disaster-recovery/
├── README.md
├── 00-build-your-operational-excellence-skill.md
├── 01-cloud-cost-fundamentals.md
├── 02-right-sizing-with-vpa.md
├── 03-opencost-visibility.md
├── 04-finops-practices-budget-alerts.md
├── 05-backup-fundamentals.md
├── 06-velero-backup-restore.md
├── 07-chaos-engineering-basics.md
├── 08-data-sovereignty-compliance.md
└── 09-capstone-resilient-cost-aware-task-api.md
```

---

## XI. Quality Reference

**Reference Lesson for L00**: `/apps/learn-app/docs/07-AI-Cloud-Native-Development/55-observability-cost-engineering/00-build-your-observability-skill.md`

**Reference Lesson for L01-L08**: `/apps/learn-app/docs/07-AI-Cloud-Native-Development/55-observability-cost-engineering/01-three-pillars-of-observability.md`

**Reference Lesson for Capstone**: `/apps/learn-app/docs/07-AI-Cloud-Native-Development/55-observability-cost-engineering/10-capstone-full-observability-stack.md`

All lessons should match these quality standards:
- Full YAML frontmatter (skills, learning_objectives, cognitive_load, differentiation)
- Narrative opening connecting to reader's goals
- Code examples with expected output
- Three "Try With AI" prompts with learning explanations
- "Reflect on Your Skill" section (L01-L09)
- Safety notes where applicable

---

## XII. Validation Checklist

**Chapter-Level Validation**:
- [x] Chapter type identified: Technical/Code-Focused
- [x] Concept density analysis documented: 12 concepts
- [x] Lesson count justified: 10 lessons (matches spec)
- [x] All evals from spec covered by lessons
- [x] All lessons map to at least one eval

**Stage Progression Validation**:
- [x] L00: Layer 3 (Skill-first)
- [x] L01-L04: Layer 1 (Manual foundation)
- [x] L05-L08: Layer 1->2 (Transition to AI collaboration)
- [x] L09: Layer 4 (Spec-driven integration)
- [x] No spec-first before Layer 4

**Cognitive Load Validation**:
- [x] Each lesson's concept count <= B1 limit (10)
- [x] Average 2-4 concepts per lesson
- [x] Complex concepts (VPA+HPA) get dedicated lessons

**Dependency Validation**:
- [x] Skill dependencies satisfied by lesson order
- [x] Cross-chapter dependencies validated (Ch50, Ch51, Ch55, Ch56 implemented)

**Three Roles Validation** (Layer 2 lessons):
- [x] L06: Demonstrates AI as Teacher/Student/Co-Worker
- [x] L07: Demonstrates AI as Teacher/Student/Co-Worker

**Skill-First Pattern Validation**:
- [x] L00 builds skill BEFORE content lessons
- [x] Every lesson L01-L09 ends with "Reflect on Your Skill"
- [x] L09 finalizes skill as production-ready asset

---

**Plan Status**: READY FOR IMPLEMENTATION

**Next Steps**:
1. Create chapter directory: `apps/learn-app/docs/07-AI-Cloud-Native-Development/59-cost-disaster-recovery/`
2. Create README.md with chapter overview
3. Implement lessons L00-L09 using content-implementer subagent
4. Validate with educational-validator
5. Run verification checklist
